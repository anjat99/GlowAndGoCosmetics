function dohvatiProizvodeIzWishlist(){return JSON.parse(localStorage.getItem("proizvodi"))}function postaviProizvodeUWishlist(o){return localStorage.setItem("proizvodi",JSON.stringify(o))}function ispisiObavestenje(){$("#sadrzajWishlist").html("<h2>Sorry, you didn't choose any product...</h1>")}$(document).ready(function(){function o(){var o=dohvatiProizvodeIzWishlist();$.ajax({url:"http://localhost/sajtphp1/modules/proizvodi/sviProizvodi.php",dataType:"json",method:"post",success:function(i){!function(o){let i='<table class="korpa table table-hover"  border="1" id="omiljeno">\n                        <thead class="thead-dark">\n                            <tr>\n                                <th scope="col">#</th>\n                                <th scope="col">Slika</th>\n                                <th scope="col">Naziv</th>\n                                <th scope="col">Cena</th>\n                                <th scope="col">Kolicina</th>\n                                <th scope="col">UKUPNA CENA</th>\n                                <th scope="col">Ukloni</th>\n                            </tr>\n                        </thead>\n                        <tbody>',t=1;for(let a of o)i+=`<tr class="rem1">\n                        <td>${t++}</td>\n                        <td><img src="${a.mala_putanja}" alt="${a.mala_alt}" class="img-fluid"</td>\n                        <td>${a.naziv}</td>\n                        <td>${a.stara_cena}</td>\n                        <td>${a.kolicina_proizvoda}</td>\n                        <td>${Number(a.stara_cena)*Number(a.kolicina_proizvoda)}</td>\n                        <td>\n                        <a href='#' data-id="${a.idProizvod}"\n                    name='link' class='btnAdmin btn-primary obrisiKorpu'><i class="fas fa-trash-alt"></i></a>\n                        </td>\n                    </tr>`;i+="</tbody>\n                    </table>",$("#korpa1").html(i)}(i=i.filter(i=>{for(let t of o)if(t.id==i.idProizvod)return i.kolicina_proizvoda=t.kolicina,!0;return!1}))},error:function(o,i,t){console.log(o.status+i)}})}dohvatiProizvodeIzWishlist()||localStorage.setItem("proizvodi",JSON.stringify([])),$(".dodajUKorpu").click(function(){var o=$(this).data("idomiljeno");console.log(o),$(".nav-right li.heart-icon a").style({color:"#ff0000"}),alert("Drago nam je da Vam se sviÄ‘a ovaj proizvod!");var i=[],t=dohvatiProizvodeIzWishlist();if(null!==t)if(t.filter(i=>i.id==o).length){let i=dohvatiProizvodeIzWishlist();for(let i of proizvodi)if(i.id==o){i.kolicina++;break}postaviProizvodeUWishlist(i)}else{for(let o of t)i.push(o);i.push({id:o,kolicina:1}),postaviProizvodeUWishlist(i)}}),o(),$("#korpa1").on("click",".obrisiKorpu",function(){let i=dohvatiProizvodeIzWishlist(),t=$(this).data("id");console.log(t);let a=i.filter(o=>o.id!=t);localStorage.setItem("proizvodi",JSON.stringify(a)),o()}),$("#kupi").click(function(){let i=$(this).data("id");console.log(i),dohvatiProizvodeIzWishlist().length?$.ajax({url:"http://localhost/sajtphp1/modules/orders/jednaPorudzbina.php",method:"post",dataType:"json",data:{send:!0,prod:dohvatiProizvodeIzWishlist(),id:i},success:function(i,t,a){201==a.status&&alert("Uspesno ste izvrsili kupovinu"),o(),localStorage.removeItem("proizvodi")},error:function(o,i,t){console.log(o.status+i)}}):alert("Ne mozete izvrsiti kupovinu")})});