function ispisiAddFormu(o){o.preventDefault(),$("#podaciProizvodDodaj").slideDown("slow"),$("html,body").animate({scrollTop:$("#podaciProizvodDodaj").offset().top},"fast"),$("#izmenaProizvodaForma").slideUp("slow")}function ispisiSveProizvode(){$.ajax({url:"http://localhost/sajtphp1/modules/proizvodi/sviProizvodi.php",dataType:"json",method:"post",success:function(o){$(".obrisiArtikal").click(obrisiProizvod),$(".azurirajArtikal").click(ispisiJedanProizvod),$("#btnUnosProizvoda").click(unesi),$("#sakriAzuriranjeProizvoda").click(function(){$("#izmenaProizvodaForma").slideUp("slow")}),$("#sakrijFormuZaProizvodeDodaj").click(function(){$("#podaciProizvodDodaj").slideUp("slow")})},error:function(o,a,i){console.log(o.status+a)}})}function obrisiProizvod(o){o.preventDefault();let a=confirm("Da li ste sigurni da zelite da obrisete atrikal?"),i=$(this).data("id");a&&$.ajax({url:"../../modules/proizvodi/obrisiProizvod.php",method:"post",dataType:"json",data:{id:i},success:function(o){ispisiSveProizvode()},error:function(o,a,i){409==o.status?$(".odgovorUpdateProizvod").html("Ne možete obrisati proizvod jer se koristi u porudžbinama!"):console.log(o.status+a)}})}function ispisiJedanProizvod(o){o.preventDefault(),$("#izmenaProizvodaForma").slideDown("slow"),$("#podaciProizvodDodaj").slideUp("slow"),$("html,body").animate({scrollTop:$("#izmenaProizvodaForma").offset().top},"fast");var a=$(this).data("id");$.ajax({url:"../../modules/proizvodi/jedanProizvod.php",method:"POST",data:{id:a},success:function(o,a,i){$("#nazivArtiklaUpdate").val(o.naziv),$("#cenaArtiklaUpdate").val(o.cena),$("#cenaStaraArtiklaUpdate").val(o.stara_cena),$("#opisArtiklaUpdate").val(o.opis),$("#ddlKategorijaUpdate").val(o.kat_id),$("#ddlBrendUpdate").val(o.brend_id),$("#skrivenoPoljeProizvod").val(o.idProizvod),console.log(i.status),201==i.status&&alert("Uspesno azuriran proizvod!")},error:function(o,a,i){switch(o.status){case 404:alert("Stranica nije pronadjena");break;case 500:alert("Greska na serveru.Trenutno nije moguce azurirati podatke o proizvodu");break;default:alert("Greska: "+o.status+"-"+a)}console.log(o.responseText),console.log(o.status)}})}function unesi(){let o=$("input[name='chStanje']:checked"),a=[];for(let i of o)a.push(i.value);$.ajax({url:"../../modules/proizvodi/addProizvod.php",method:"POST",data:{naziv:$("#nazivProizvoda").val(),slika_id:$("#slikaProizvoda").val(),thumbnail_id:$("#slikaProizvodaMala").val(),cena:$("#cenaProizvoda").val(),stara_cena:$("#cenaProizvodaStara").val(),opis:$("#opisProizvoda").val(),uk_kolicina:$("#kolicina").val(),kat_id:$("#ddlKategorija").val(),brend_id:$("#ddlBrend").val(),na_stanju:a,send:!0},success:function(o,a,i){$("input[name='chStanje']").removeAttr("checked"),1==o.na_stanju&&$("input[name='chStanje']").attr("checked",!0);var e=o.datum_unosa.split(" ");$("#datumAdd").val(e[0]),$("#skrivenoAdd").val(o.idProizvod),console.warn("Statusni kod:"),console.log(i.status),201==i.status&&alert("Uspesno unet proizvod!"),ispisiSveProizvode()},error:function(o,a,i){console.error("----\x3e GRESKA <----"),console.log(o)}})}$(document).ready(function(){ispisiSveProizvode(),$("#dodajProizvod").click(ispisiAddFormu)});